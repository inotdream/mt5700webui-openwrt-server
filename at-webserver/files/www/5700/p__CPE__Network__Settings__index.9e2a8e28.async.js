"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[992],{16955:function(nn,Pe,_){_.r(Pe);var br=_(97857),te=_.n(br),yr=_(9783),S=_.n(yr),_r=_(19632),ge=_.n(_r),vr=_(15009),B=_.n(vr),Br=_(99289),K=_.n(Br),Er=_(5574),C=_.n(Er),Cr=_(59955),he=_(45605),Le=_(47221),j=_(8232),v=_(2453),Fr=_(74330),ue=_(36039),O=_(78045),be=_(76560),ee=_(60801),M=_(77683),ye=_(78957),_e=_(83062),Ie=_(32983),we=_(96074),A=_(67294),e=_(85893),Ne=Le.Z.Panel,xr={labelCol:{span:24},wrapperCol:{span:24}},ve=function(J){return{display:"flex",flexDirection:J?"column":"row",gap:J?"4px":"8px",marginBottom:J?"8px":"16px",alignItems:"flex-start"}},Y=function(J){return{flex:1,marginBottom:J?"4px":0}},jr=function(){var J=(0,A.useState)({width:window.innerWidth,isMobile:window.innerWidth<=768}),d=C()(J,2),Ee=d[0],Ce=d[1];return(0,A.useEffect)(function(){var F=function(){Ce({width:window.innerWidth,isMobile:window.innerWidth<=768})};return window.addEventListener("resize",F),function(){return window.removeEventListener("resize",F)}},[]),Ee},Sr=function(){var J=jr(),d=J.isMobile,Ee=j.Z.useForm(),Ce=C()(Ee,1),F=Ce[0],Ze=(0,A.useState)(!1),Me=C()(Ze,2),kr=Me[0],ce=Me[1],R=Cr.S.getInstance(),Ar=(0,A.useState)([]),Oe=C()(Ar,2),Fe=Oe[0],Tr=Oe[1],Dr=(0,A.useState)(!1),ze=C()(Dr,2),Rr=ze[0],Ke=ze[1],Pr=(0,A.useState)(!1),Ue=C()(Pr,2),We=Ue[0],un=Ue[1],Lr=(0,A.useState)(5),Ge=C()(Lr,2),$e=Ge[0],an=Ge[1],Ir=(0,A.useState)(!1),Ve=C()(Ir,2),xe=Ve[0],Qe=Ve[1],wr=(0,A.useState)(null),He=C()(wr,2),D=He[0],Nr=He[1],Zr=(0,A.useState)(null),Ye=C()(Zr,2),U=Ye[0],Mr=Ye[1],Or=(0,A.useState)(!1),Je=C()(Or,2),zr=Je[0],Xe=Je[1],Kr=(0,A.useState)({}),qe=C()(Kr,2),ae=qe[0],er=qe[1],Ur=(0,A.useState)(!0),rr=C()(Ur,2),Wr=rr[0],nr=rr[1],Gr=(0,A.useState)(["nrLock"]),ur=C()(Gr,2),$r=ur[0],ar=ur[1],Vr=(0,A.useState)(!1),sr=C()(Vr,2),z=sr[0],H=sr[1];(0,A.useEffect)(function(){var u=function(){var a=K()(B()().mark(function r(){var s;return B()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,nr(!0),o.next=4,R.connect();case 4:if(s=o.sent,!s){o.next=10;break}return o.next=8,je();case 8:return o.next=10,mr();case 10:o.next=16;break;case 12:o.prev=12,o.t0=o.catch(0),console.error("\u521D\u59CB\u5316\u5931\u8D25:",o.t0),v.ZP.error("\u8BFB\u53D6\u914D\u7F6E\u5931\u8D25");case 16:return o.prev=16,nr(!1),o.finish(16);case 19:case"end":return o.stop()}},r,null,[[0,12,16,19]])}));return function(){return a.apply(this,arguments)}}();return u(),function(){R.disconnect()}},[]),(0,A.useEffect)(function(){var u;return We&&(u=setInterval(function(){pr()},$e*1e3)),function(){u&&clearInterval(u)}},[We,$e]);var je=function(){var u=K()(B()().mark(function a(){var r,s,n,o,t,c,p,E,m,h,f,l,g,x,k,b,P,L,V,q,G,ie,i,y,N,Q,$,I,T,fe,oe,me,De,Re,hr;return B()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.prev=0,ce(!0),Z.next=4,R.sendCommand("AT^LTEFREQLOCK?");case 4:if(r=Z.sent,console.log("LTE\u9501\u9891\u54CD\u5E94:",r),r.success&&r.data&&(s=r.data.split(`
`).map(function(w){return w.trim()}).filter(function(w){return w&&!w.includes("OK")}),n=s[0].match(/\^LTEFREQLOCK:\s*(\d+)/),n&&(o=Number(n[1]),F.setFieldsValue({lteLockType:o}),o!==0&&ar(function(w){return Array.from(new Set([].concat(ge()(w),["lteLock"])))}),o!==0))){for(t=s[1],c=t.split(",").map(Number),p=C()(c,2),E=p[0],m=p[1],F.setFieldsValue({lteMobility:E}),de([]),h=[],f=0;f<m;f++)l=s[f+2],l&&(g=l.split(",").map(function(w){return w?Number(w):void 0}),x=C()(g,3),k=x[0],b=x[1],P=x[2],o===3?F.setFieldsValue(S()({},"lteBand_".concat(f),k)):o===1?F.setFieldsValue(S()(S()({},"lteBand_".concat(f),k),"lteArfcn_".concat(f),b)):o===2&&F.setFieldsValue(S()(S()(S()({},"lteBand_".concat(f),k),"lteArfcn_".concat(f),b),"ltePci_".concat(f),P)),h.push(f));de(h)}return Z.next=9,R.sendCommand("AT^NRFREQLOCK?");case 9:if(L=Z.sent,console.log("NR\u9501\u9891\u54CD\u5E94:",L),L.success&&L.data&&(V=L.data.split(`
`).map(function(w){return w.trim()}).filter(function(w){return w&&!w.includes("OK")}),q=V[0].match(/\^NRFREQLOCK:\s*(\d+)/),q&&(G=Number(q[1]),F.setFieldsValue({nrLockType:G}),pe([]),G!==0))){for(ie=V[1],i=ie.split(",").map(Number),y=C()(i,2),N=y[0],Q=y[1],F.setFieldsValue({nrMobility:N}),$=[],I=0;I<Q;I++)T=V[I+2],T&&(fe=T.split(",").map(function(w){return w?Number(w):void 0}),oe=C()(fe,4),me=oe[0],De=oe[1],Re=oe[2],hr=oe[3],G===3?F.setFieldsValue(S()({},"nrBand_".concat(I),me)):G===1?F.setFieldsValue(S()(S()(S()({},"nrBand_".concat(I),me),"nrArfcn_".concat(I),De),"nrScsType_".concat(I),Re)):G===2&&F.setFieldsValue(S()(S()(S()(S()({},"nrBand_".concat(I),me),"nrArfcn_".concat(I),De),"nrScsType_".concat(I),Re),"nrPci_".concat(I),hr)),$.push(I));pe($)}Z.next=18;break;case 14:Z.prev=14,Z.t0=Z.catch(0),console.error("\u83B7\u53D6\u9501\u9891\u8BBE\u7F6E\u5931\u8D25:",Z.t0),v.ZP.error("\u83B7\u53D6\u9501\u9891\u8BBE\u7F6E\u5931\u8D25");case 18:return Z.prev=18,ce(!1),Z.finish(18);case 21:case"end":return Z.stop()}},a,null,[[0,14,18,21]])}));return function(){return u.apply(this,arguments)}}(),re=function(){var u=K()(B()().mark(function a(r){var s,n,o,t;return B()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:p.prev=0,console.log("".concat(r?"\u5F00\u542F":"\u5173\u95ED","\u98DE\u884C\u6A21\u5F0F")),s=3,n=0,o=B()().mark(function E(){var m,h,f,l,g,x;return B()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,R.sendCommand("AT+CFUN=".concat(r?"0":"1"));case 2:if(m=b.sent,!m.success){b.next=22;break}if(!r){b.next=20;break}return h=2e3,console.log("\u7B49\u5F85".concat(h/1e3,"\u79D2\u8BA9\u98DE\u884C\u6A21\u5F0F\u5F00\u542F\u751F\u6548...")),b.next=9,new Promise(function(P){return setTimeout(P,h)});case 9:return b.next=11,R.sendCommand("AT+CFUN?");case 11:if(f=b.sent,!(f.success&&f.data)){b.next=18;break}if(l=f.data,g=l.includes("+CFUN: 0"),g!==r){b.next=18;break}return console.log("\u98DE\u884C\u6A21\u5F0F\u5F00\u542F\u6210\u529F"),b.abrupt("return",{v:!0});case 18:b.next=22;break;case 20:return console.log("\u5DF2\u53D1\u9001\u5173\u95ED\u98DE\u884C\u6A21\u5F0F\u547D\u4EE4"),b.abrupt("return",{v:!0});case 22:if(n++,!(n<s)){b.next=28;break}return x=2e3*n,console.log("\u7B2C".concat(n,"\u6B21\u5C1D\u8BD5\u5931\u8D25\uFF0C").concat(x/1e3,"\u79D2\u540E\u91CD\u8BD5...")),b.next=28,new Promise(function(P){return setTimeout(P,x)});case 28:case"end":return b.stop()}},E)});case 5:if(!(n<s)){p.next=12;break}return p.delegateYield(o(),"t0",7);case 7:if(t=p.t0,!t){p.next=10;break}return p.abrupt("return",t.v);case 10:p.next=5;break;case 12:return console.error("\u98DE\u884C\u6A21\u5F0F".concat(r?"\u5F00\u542F":"\u5173\u95ED","\u5931\u8D25\uFF0C\u5DF2\u91CD\u8BD5").concat(s,"\u6B21")),p.abrupt("return",!1);case 16:return p.prev=16,p.t1=p.catch(0),console.error("".concat(r?"\u5F00\u542F":"\u5173\u95ED","\u98DE\u884C\u6A21\u5F0F\u5931\u8D25:"),p.t1),p.abrupt("return",!1);case 20:case"end":return p.stop()}},a,null,[[0,16]])}));return function(r){return u.apply(this,arguments)}}(),le=function(a){return[1,2,3,5,7,8,12,20,25,28,66,71,75,76].includes(a)?0:[38,40,41,48,77,78,79].includes(a)?1:[257,258,260,261].includes(a)?3:0},tr=[{label:"\u5173\u95ED",value:0},{label:"\u9501\u5B9A\u9891\u70B9",value:1},{label:"\u9501\u5B9A\u5C0F\u533A",value:2},{label:"\u9501\u5B9ABand",value:3}],Qr=[{label:"B1 2100MHz",value:1},{label:"B3 1800MHz",value:3},{label:"B5 850MHz",value:5},{label:"B8 900MHz",value:8},{label:"B34 2100MHz TDD",value:34},{label:"B38 2600MHz TDD",value:38},{label:"B39 1900MHz TDD",value:39},{label:"B40 2300MHz TDD",value:40},{label:"B41 2500MHz TDD",value:41}],ir=[{label:"n1 2100MHz",value:1},{label:"n3 1800MHz",value:3},{label:"n5 850MHz",value:5},{label:"n8 900MHz",value:8},{label:"n28 700MHz",value:28},{label:"n41 2500MHz",value:41},{label:"n78 3500MHz",value:78},{label:"n79 4700MHz",value:79}],Hr=(0,A.useState)([0]),lr=C()(Hr,2),ne=lr[0],de=lr[1],Yr=(0,A.useState)([0]),or=C()(Yr,2),W=or[0],pe=or[1],Jr=function(){de([].concat(ge()(ne),[ne.length]))},cr=function(){var a=W.map(function(r){return F.getFieldValue("nrBand_".concat(r))});if(W.length>=20){v.ZP.warning("\u6700\u591A\u53EA\u80FD\u6DFB\u52A020\u4E2A\u9891\u6BB5");return}pe([].concat(ge()(W),[W.length]))},Xr=function(a){var r=ne.filter(function(n){return n!==a});de(r);var s=F.getFieldsValue();delete s["lteBand_".concat(a)],delete s["lteArfcn_".concat(a)],delete s["ltePci_".concat(a)],F.setFieldsValue(s)},dr=function(a){var r=W.filter(function(n){return n!==a});pe(r);var s=F.getFieldsValue();delete s["nrBand_".concat(a)],delete s["nrArfcn_".concat(a)],delete s["nrPci_".concat(a)],delete s["nrScsType_".concat(a)],F.setFieldsValue(s)},qr=function(){var u=K()(B()().mark(function a(r){var s,n,o,t,c,p,E,m,h,f,l,g,x,k,b,P,L,V,q,G;return B()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!z){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,H(!0),ce(!0),v.ZP.loading("\u6B63\u5728\u8BBE\u7F6E\u9501\u9891...",0),i.next=8,re(!0);case 8:if(s=i.sent,s){i.next=11;break}throw new Error("\u5F00\u542F\u98DE\u884C\u6A21\u5F0F\u5931\u8D25");case 11:return i.next=13,new Promise(function(y){return setTimeout(y,2e3)});case 13:if(r.lteLockType===void 0){i.next=49;break}if(n="",r.lteLockType!==0){i.next=19;break}n="AT^LTEFREQLOCK=0",i.next=40;break;case 19:if(o=r.lteMobility||0,t=ne.length,c=[],p=[],E=[],ne.forEach(function(y){var N=r["lteBand_".concat(y)],Q=r["lteArfcn_".concat(y)],$=r["ltePci_".concat(y)];if(N!=null&&N!==""){if(c.push(N),r.lteLockType===1||r.lteLockType===2){if(!Q)throw new Error("\u7B2C".concat(y+1,"\u9879\u7684\u9891\u70B9\u4E0D\u80FD\u4E3A\u7A7A"));p.push(String(Q).trim())}if(r.lteLockType===2){if(!$)throw new Error("\u7B2C".concat(y+1,"\u9879\u7684PCI\u4E0D\u80FD\u4E3A\u7A7A"));E.push(String($).trim())}}}),c.length!==0){i.next=27;break}throw new Error("\u8BF7\u81F3\u5C11\u8F93\u5165\u4E00\u4E2A\u6709\u6548\u7684\u9891\u6BB5");case 27:i.t0=r.lteLockType,i.next=i.t0===3?30:i.t0===1?32:i.t0===2?36:40;break;case 30:return n="AT^LTEFREQLOCK=".concat(r.lteLockType,",").concat(o,",").concat(t,',"').concat(c.join(","),'"'),i.abrupt("break",40);case 32:if(p.length===t){i.next=34;break}throw new Error("\u9891\u70B9\u7684\u6570\u91CF\u5FC5\u987B\u4E0E\u9891\u6BB5\u6570\u91CF\u76F8\u540C");case 34:return n="AT^LTEFREQLOCK=".concat(r.lteLockType,",").concat(o,",").concat(t,',"').concat(c.join(","),'","').concat(p.join(","),'"'),i.abrupt("break",40);case 36:if(!(p.length!==t||E.length!==t)){i.next=38;break}throw new Error("\u9891\u70B9\u548CPCI\u7684\u6570\u91CF\u5FC5\u987B\u4E0E\u9891\u6BB5\u6570\u91CF\u76F8\u540C");case 38:return n="AT^LTEFREQLOCK=".concat(r.lteLockType,",").concat(o,",").concat(t,',"').concat(c.join(","),'","').concat(p.join(","),'","').concat(E.join(","),'"'),i.abrupt("break",40);case 40:if(!n){i.next=49;break}return console.log("\u53D1\u9001LTE\u9501\u9891\u547D\u4EE4:",n),i.next=44,R.sendCommand(n);case 44:if(m=i.sent,m.success){i.next=47;break}throw new Error("LTE\u9501\u9891\u8BBE\u7F6E\u5931\u8D25");case 47:return i.next=49,new Promise(function(y){return setTimeout(y,1e3)});case 49:if(r.nrLockType===void 0){i.next=89;break}if(h="",r.nrLockType!==0){i.next=55;break}h="AT^NRFREQLOCK=0",i.next=80;break;case 55:if(f=r.nrMobility||0,l=W.length,g=[],x=[],k=[],b=[],W.forEach(function(y){var N=r["nrBand_".concat(y)],Q=r["nrArfcn_".concat(y)],$=r["nrScsType_".concat(y)],I=r["nrPci_".concat(y)];if(N!=null&&N!==""&&(g.push(N),(r.nrLockType===1||r.nrLockType===2)&&(x.push(String(Q).trim()),k.push(String($).trim())),r.nrLockType===2)){if(!I)throw new Error("\u7B2C".concat(y+1,"\u9879\u7684PCI\u4E0D\u80FD\u4E3A\u7A7A"));b.push(String(I).trim())}}),g.length!==0){i.next=64;break}throw new Error("\u8BF7\u81F3\u5C11\u8F93\u5165\u4E00\u4E2A\u6709\u6548\u7684\u9891\u6BB5");case 64:i.t1=r.nrLockType,i.next=i.t1===3?67:i.t1===1?72:i.t1===2?76:80;break;case 67:if(P=W.map(function(y){return r["nrBand_".concat(y)]}).filter(function(y){return y!=null&&y!==""}),P.length!==0){i.next=70;break}throw new Error("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u4E2A\u9891\u6BB5");case 70:return h="AT^NRFREQLOCK=".concat(r.nrLockType,",").concat(f,",").concat(P.length,',"').concat(P.join(","),'"'),i.abrupt("break",80);case 72:if(!(x.length!==l||k.length!==l)){i.next=74;break}throw new Error("\u9891\u70B9\u548C\u5B50\u8F7D\u6CE2\u95F4\u9694\u7684\u6570\u91CF\u5FC5\u987B\u4E0E\u9891\u6BB5\u6570\u91CF\u76F8\u540C");case 74:return h="AT^NRFREQLOCK=".concat(r.nrLockType,",").concat(f,",").concat(l,',"').concat(g.join(","),'","').concat(x.join(","),'","').concat(k.join(","),'"'),i.abrupt("break",80);case 76:if(!(x.length!==l||k.length!==l||b.length!==l)){i.next=78;break}throw new Error("\u9891\u70B9\u3001\u5B50\u8F7D\u6CE2\u95F4\u9694\u548CPCI\u7684\u6570\u91CF\u5FC5\u987B\u4E0E\u9891\u6BB5\u6570\u91CF\u76F8\u540C");case 78:return h="AT^NRFREQLOCK=".concat(r.nrLockType,",").concat(f,",").concat(l,',"').concat(g.join(","),'","').concat(x.join(","),'","').concat(k.join(","),'","').concat(b.join(","),'"'),i.abrupt("break",80);case 80:if(!h){i.next=89;break}return console.log("\u53D1\u9001NR\u9501\u9891\u547D\u4EE4:",h),i.next=84,R.sendCommand(h);case 84:if(L=i.sent,L.success){i.next=87;break}throw new Error("NR\u9501\u9891\u8BBE\u7F6E\u5931\u8D25");case 87:return i.next=89,new Promise(function(y){return setTimeout(y,1e3)});case 89:return i.next=91,re(!1);case 91:if(V=i.sent,V){i.next=94;break}throw new Error("\u5173\u95ED\u98DE\u884C\u6A21\u5F0F\u5931\u8D25");case 94:return i.next=96,new Promise(function(y){return setTimeout(y,2e3)});case 96:return i.next=98,R.sendCommand("AT^LTEFREQLOCK?");case 98:return q=i.sent,i.next=101,R.sendCommand("AT^NRFREQLOCK?");case 101:if(G=i.sent,!(!q.success||!G.success)){i.next=104;break}throw new Error("\u67E5\u8BE2\u9501\u9891\u72B6\u6001\u5931\u8D25");case 104:return v.ZP.destroy(),v.ZP.success("\u9501\u9891\u8BBE\u7F6E\u6210\u529F"),i.next=108,je();case 108:i.next=117;break;case 110:return i.prev=110,i.t2=i.catch(2),console.error("\u9501\u9891\u8BBE\u7F6E\u5931\u8D25:",i.t2),v.ZP.destroy(),v.ZP.error(i.t2 instanceof Error?i.t2.message:"\u9501\u9891\u8BBE\u7F6E\u5931\u8D25"),i.next=117,re(!1);case 117:return i.prev=117,ce(!1),H(!1),i.finish(117);case 121:case"end":return i.stop()}},a,null,[[2,110,117,121]])}));return function(r){return u.apply(this,arguments)}}(),pr=function(){var u=K()(B()().mark(function a(){var r,s,n;return B()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!z){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,H(!0),Ke(!0),t.next=7,R.sendCommand("AT^MONNC");case 7:r=t.sent,console.log("\u90BB\u533A\u626B\u63CF\u54CD\u5E94:",r),r.success&&r.data&&(s=[],n=r.data.split(`
`),n.forEach(function(c){if(c.startsWith("^MONNC:")){var p=c.match(/\^MONNC:\s*(\w+)(?:,(.+))?/)||[],E=C()(p,3),m=E[0],h=E[1],f=E[2];if(h&&h!=="NONE"){var l={type:h};if(f){var g=f.split(",").map(function(P){return P.trim().replace(/"/g,"")});if(h==="LTE")l.arfcn=g[0],l.pci=g[1],l.rsrp=g[2],l.rsrq=g[3],l.rxlev=g[4],l.band=Se("LTE",parseInt(l.arfcn));else if(h==="NR"){l.arfcn=g[0],l.pci=parseInt(g[1],16);var x=parseInt(g[2]);l.rsrp=Math.abs(x)>200?(x/8).toFixed(1):x;var k=parseInt(g[3]);l.rsrq=Math.abs(k)>100?(k/8).toFixed(1):k;var b=parseInt(g[4]);l.sinr=Math.abs(b)>100?(b/8).toFixed(1):b,l.band=Se("NR",parseInt(l.arfcn))}}s.push(l)}}}),Tr(s)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),console.error("\u626B\u63CF\u90BB\u533A\u5931\u8D25:",t.t0),v.ZP.error("\u626B\u63CF\u90BB\u533A\u5931\u8D25");case 16:return t.prev=16,Ke(!1),H(!1),t.finish(16);case 20:case"end":return t.stop()}},a,null,[[2,12,16,20]])}));return function(){return u.apply(this,arguments)}}(),Se=function(a,r){if(a==="LTE"){if(r>=0&&r<=599)return 1;if(r>=1200&&r<=1949)return 3;if(r>=2400&&r<=2649)return 5;if(r>=3450&&r<=3799)return 8;if(r>=36200&&r<=36349)return 34;if(r>=37750&&r<=38249)return 38;if(r>=38250&&r<=38649)return 39;if(r>=38650&&r<=39649)return 40;if(r>=39650&&r<=41589)return 41}else{if(r>=422e3&&r<=434e3)return 1;if(r>=361e3&&r<=376e3)return 3;if(r>=173800&&r<=178800)return 5;if(r>=185e3&&r<=192e3)return 8;if(r>=151600&&r<=159600)return 28;if(r>=499200&&r<=537999)return 41;if(r>=62e4&&r<=68e4)return 78;if(r>=693334&&r<=733333)return 79}},fr=function(){var u=K()(B()().mark(function a(r){var s,n,o,t,c,p,E,m,h=arguments;return B()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(s=h.length>1&&h[1]!==void 0?h[1]:!1,n="".concat(r.type,"_").concat(r.pci,"_").concat(r.arfcn),!(ae[n]||z)){l.next=4;break}return l.abrupt("return");case 4:return l.prev=4,H(!0),er(function(g){return te()(te()({},g),{},S()({},n,!0))}),v.ZP.loading({content:"\u6B63\u5728\u5F00\u542F\u98DE\u884C\u6A21\u5F0F...",key:n}),l.next=10,re(!0);case 10:if(o=l.sent,o){l.next=14;break}throw v.ZP.error({content:"\u5F00\u542F\u98DE\u884C\u6A21\u5F0F\u5931\u8D25\uFF0C\u65E0\u6CD5\u9501\u5B9A\u5C0F\u533A",key:n}),new Error("\u5F00\u542F\u98DE\u884C\u6A21\u5F0F\u5931\u8D25");case 14:return v.ZP.loading({content:"\u7B49\u5F85\u98DE\u884C\u6A21\u5F0F\u751F\u6548...",key:n}),l.next=17,new Promise(function(g){return setTimeout(g,1e3)});case 17:return v.ZP.loading({content:"\u6B63\u5728\u9501\u5B9A".concat(r.type==="NR"?"5G":"4G","\u5C0F\u533A (PCI: ").concat(r.pci,")..."),key:n}),t="",r.type==="LTE"?t='AT^LTEFREQLOCK=2,0,1,"'.concat(r.band||"",'","').concat(r.arfcn,'","').concat(r.pci,'"'):r.type==="NR"&&(c=le(r.band),t='AT^NRFREQLOCK=2,0,1,"'.concat(r.band,'","').concat(r.arfcn,'","').concat(c,'","').concat(r.pci,'"')),console.log("\u53D1\u9001\u9501\u9891\u547D\u4EE4:",t),l.next=23,R.sendCommand(t);case 23:if(p=l.sent,console.log("\u9501\u9891\u54CD\u5E94:",p),p.success){l.next=28;break}throw v.ZP.error({content:"".concat(r.type==="NR"?"5G":"4G","\u5C0F\u533A\u9501\u5B9A\u5931\u8D25"),key:n}),new Error("".concat(r.type,"\u9501\u9891\u8BBE\u7F6E\u5931\u8D25"));case 28:return v.ZP.loading({content:"\u6B63\u5728\u5173\u95ED\u98DE\u884C\u6A21\u5F0F...",key:n}),l.next=31,re(!1);case 31:return E=l.sent,E||v.ZP.warning({content:"\u5173\u95ED\u98DE\u884C\u6A21\u5F0F\u53EF\u80FD\u9700\u8981\u4E00\u4E9B\u65F6\u95F4\uFF0C\u8BF7\u7A0D\u540E\u68C0\u67E5\u8BBE\u5907\u72B6\u6001",key:n,duration:5}),v.ZP.loading({content:"\u6B63\u5728\u9A8C\u8BC1\u9501\u9891\u7ED3\u679C...",key:n}),l.next=36,en(r);case 36:if(m=l.sent,m){l.next=40;break}throw v.ZP.error({content:"\u9501\u9891\u9A8C\u8BC1\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5",key:n}),new Error("\u9501\u9891\u9A8C\u8BC1\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 40:return v.ZP.loading({content:"\u6B63\u5728\u5237\u65B0\u8BBE\u7F6E...",key:n}),l.next=43,je();case 43:if(!s){l.next=47;break}return v.ZP.loading({content:"\u6B63\u5728\u5237\u65B0SSB\u4FE1\u606F...",key:n}),l.next=47,gr();case 47:return v.ZP.success({content:"\u6210\u529F\u9501\u5B9A".concat(r.type==="NR"?"5G":"4G","\u5C0F\u533A (PCI: ").concat(r.pci,")"),key:n,duration:3}),l.abrupt("return",!0);case 51:return l.prev=51,l.t0=l.catch(4),console.error("\u9501\u5B9A\u5C0F\u533A\u5931\u8D25:",l.t0),v.ZP.error({content:l.t0 instanceof Error?l.t0.message:"\u9501\u5B9A\u5C0F\u533A\u5931\u8D25",key:n}),l.prev=55,v.ZP.loading({content:"\u6B63\u5728\u6062\u590D\u98DE\u884C\u6A21\u5F0F...",key:n}),l.next=59,re(!1);case 59:l.next=64;break;case 61:l.prev=61,l.t1=l.catch(55),console.error("\u5173\u95ED\u98DE\u884C\u6A21\u5F0F\u5931\u8D25:",l.t1);case 64:return l.abrupt("return",!1);case 65:return l.prev=65,er(function(g){return te()(te()({},g),{},S()({},n,!1))}),H(!1),l.finish(65);case 69:case"end":return l.stop()}},a,null,[[4,51,65,69],[55,61]])}));return function(r){return u.apply(this,arguments)}}(),en=function(){var u=K()(B()().mark(function a(r){var s,n;return B()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new Promise(function(c){return setTimeout(c,2e3)});case 3:if(r.type!=="LTE"){t.next=9;break}return t.next=6,R.sendCommand("AT^LTEFREQLOCK?");case 6:s=t.sent,t.next=13;break;case 9:if(r.type!=="NR"){t.next=13;break}return t.next=12,R.sendCommand("AT^NRFREQLOCK?");case 12:s=t.sent;case 13:if(!(!s||!s.success)){t.next=16;break}return console.warn("\u67E5\u8BE2\u9501\u9891\u72B6\u6001\u5931\u8D25"),t.abrupt("return",!0);case 16:if(console.log("\u9501\u9891\u72B6\u6001\u67E5\u8BE2\u54CD\u5E94:",s.data),n=s.data||"",!n.includes("=0")){t.next=21;break}return console.warn("\u9501\u9891\u72B6\u6001\u4E3A\u5173\u95ED"),t.abrupt("return",!1);case 21:return t.abrupt("return",!0);case 24:return t.prev=24,t.t0=t.catch(0),console.error("\u9A8C\u8BC1\u9501\u9891\u72B6\u6001\u5931\u8D25:",t.t0),t.abrupt("return",!0);case 28:case"end":return t.stop()}},a,null,[[0,24]])}));return function(r){return u.apply(this,arguments)}}(),X=function(a){return a>=-80?{color:"#52c41a",text:"\u5F88\u597D"}:a>=-90?{color:"#1890ff",text:"\u826F\u597D"}:a>=-100?{color:"#faad14",text:"\u4E00\u822C"}:{color:"#f5222d",text:"\u8F83\u5DEE"}},ke=function(a){return a>=-10?{color:"#52c41a",text:"\u5F88\u597D"}:a>=-15?{color:"#1890ff",text:"\u826F\u597D"}:a>=-20?{color:"#faad14",text:"\u4E00\u822C"}:{color:"#f5222d",text:"\u8F83\u5DEE"}},se=function(a){return a>=20?{color:"#52c41a",text:"\u5F88\u597D"}:a>=10?{color:"#1890ff",text:"\u826F\u597D"}:a>=0?{color:"#faad14",text:"\u4E00\u822C"}:{color:"#f5222d",text:"\u8F83\u5DEE"}},rn=function(a){var r=["RSRP","RSRQ","SINR"];return a.flatMap(function(s){return r.map(function(n){var o=0;switch(n){case"RSRP":o=Ae(Number(s.rsrp),-140,-60);break;case"RSRQ":o=Ae(Number(s.rsrq),-40,0);break;case"SINR":s.type==="NR"&&(o=Ae(Number(s.sinr),-20,30));break}return{cell:"".concat(s.type==="NR"?"5G":"4G"," ").concat(s.type==="NR"?"n":"B").concat(s.band||"?"," (").concat(s.pci,")"),metric:n,value:o,type:s.type,rawValue:n==="RSRP"?s.rsrp:n==="RSRQ"?s.rsrq:s.sinr}}).filter(function(n){return n.value>0||n.metric!=="SINR"})})},Ae=function(a,r,s){return Math.max(0,Math.min(100,(a-r)/(s-r)*100))},sn={data:rn(Fe),xField:"metric",yField:"value",seriesField:"cell",meta:{value:{min:0,max:100}},xAxis:{line:null,tickLine:null,grid:{line:{style:{lineDash:[4,4]}}}},yAxis:{grid:{line:{type:"line",style:{lineDash:[4,4]}}}},point:{size:4},area:{style:{fillOpacity:.3}},legend:{position:"bottom"},tooltip:{formatter:function(a){var r="";switch(a.metric){case"RSRP":r="RSRP: ".concat(a.rawValue,"dBm (").concat(X(Number(a.rawValue)).text,")");break;case"RSRQ":r="RSRQ: ".concat(a.rawValue,"dB (").concat(ke(Number(a.rawValue)).text,")");break;case"SINR":r="SINR: ".concat(a.rawValue,"dB (").concat(se(Number(a.rawValue)).text,")");break}return{name:a.cell,value:r}}}},mr=function(){var u=K()(B()().mark(function a(){var r,s,n,o,t,c,p;return B()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,m.next=3,new Promise(function(h){return setTimeout(h,1e3)});case 3:return m.next=5,R.sendCommand("AT^C5GOPTION?");case 5:r=m.sent,r.success&&r.data&&(s=r.data.match(/\^C5GOPTION:\s*(\d+),(\d+),(\d+)/),s&&(n=C()(s,4),o=n[0],t=n[1],c=n[2],p=n[3],Nr({nr_sa_support_flag:Number(t),nr_dc_mode:Number(c),gc_access_mode:Number(p)}))),m.next=13;break;case 9:m.prev=9,m.t0=m.catch(0),console.error("\u67E5\u8BE25G\u63A5\u5165\u6A21\u5F0F\u5931\u8D25:",m.t0),v.ZP.error("\u67E5\u8BE25G\u63A5\u5165\u6A21\u5F0F\u5931\u8D25");case 13:case"end":return m.stop()}},a,null,[[0,9]])}));return function(){return u.apply(this,arguments)}}(),Te=function(){var u=K()(B()().mark(function a(r){var s,n,o;return B()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!z){c.next=2;break}return c.abrupt("return");case 2:return c.prev=2,H(!0),Qe(!0),c.next=7,re(!0);case 7:if(s=c.sent,s){c.next=10;break}throw new Error("\u5F00\u542F\u98DE\u884C\u6A21\u5F0F\u5931\u8D25");case 10:return n="AT^C5GOPTION=".concat(r.nr_sa_support_flag,",").concat(r.nr_dc_mode,",").concat(r.gc_access_mode),c.next=13,R.sendCommand(n);case 13:if(o=c.sent,o.success){c.next=16;break}throw new Error("\u8BBE\u7F6E5G\u63A5\u5165\u6A21\u5F0F\u5931\u8D25");case 16:return v.ZP.success("\u8BBE\u7F6E\u6210\u529F"),c.next=19,mr();case 19:c.next=25;break;case 21:c.prev=21,c.t0=c.catch(2),console.error("\u8BBE\u7F6E5G\u63A5\u5165\u6A21\u5F0F\u5931\u8D25:",c.t0),v.ZP.error(c.t0 instanceof Error?c.t0.message:"\u8BBE\u7F6E\u5931\u8D25");case 25:return c.prev=25,Qe(!1),H(!1),c.next=30,re(!1);case 30:return c.finish(25);case 31:case"end":return c.stop()}},a,null,[[2,21,25,31]])}));return function(r){return u.apply(this,arguments)}}(),tn=function(a){return a?a.nr_sa_support_flag===1&&a.nr_dc_mode===0&&a.gc_access_mode===1?"\u4EC5SA":a.nr_sa_support_flag===0&&a.nr_dc_mode===1&&a.gc_access_mode===0?"\u4EC5NSA":a.nr_sa_support_flag===1&&a.nr_dc_mode===1&&a.gc_access_mode===1?"SA+NSA":"\u5176\u4ED6":"\u672A\u77E5"},gr=function(){var u=K()(B()().mark(function a(){var r,s,n,o,t,c,p,E,m,h,f,l,g,x,k,b,P,L,V,q,G,ie,i,y,N,Q,$;return B()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!z){T.next=2;break}return T.abrupt("return");case 2:return T.prev=2,H(!0),Xe(!0),T.next=7,R.sendCommand("AT^NRSSBID?");case 7:if(r=T.sent,console.log("SSB\u4FE1\u606F\u54CD\u5E94:",r),r.success&&r.data&&(s=r.data.split(`
`),n=s.find(function(fe){return fe.startsWith("^NRSSBID:")}),n)){for(o=n.replace("^NRSSBID:","").trim().split(","),t=C()(o,6),c=t[0],p=t[1],E=t[2],m=t[3],h=t[4],f=t[5],l=[],g=0;g<8;g++)x=Number(o[6+g*2]),k=Number(o[7+g*2]),x!==255&&k!==32767&&l.push({ssbId:x,rsrp:k});for(b=Number(o[22]),P=[],L=23,V=0;V<b;V++){for(q=o[L],G=o[L+1],ie=Number(o[L+2]),i=Number(o[L+3]),y=[],N=0;N<4;N++)Q=Number(o[L+4+N*2]),$=Number(o[L+5+N*2]),Q!==255&&$!==32767&&y.push({ssbId:Q,rsrp:$});P.push({pci:q,arfcn:G,rsrp:ie,sinr:i,ssbs:y}),L+=12}Mr({servingCell:{arfcn:c,cid:p,pci:E,rsrp:Number(m),sinr:Number(h),ta:Number(f),ssbs:l},neighborCells:P})}T.next=16;break;case 12:T.prev=12,T.t0=T.catch(2),console.error("\u67E5\u8BE2SSB\u4FE1\u606F\u5931\u8D25:",T.t0),v.ZP.error("\u67E5\u8BE2SSB\u4FE1\u606F\u5931\u8D25");case 16:return T.prev=16,Xe(!1),H(!1),T.finish(16);case 20:case"end":return T.stop()}},a,null,[[2,12,16,20]])}));return function(){return u.apply(this,arguments)}}();return(0,e.jsx)("div",{children:(0,e.jsxs)(Fr.Z,{spinning:Wr,tip:"\u6B63\u5728\u8BFB\u53D6\u914D\u7F6E...",style:{maxHeight:"100%",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,e.jsxs)(ue.Z,{title:"\u9501\u9891\u8BBE\u7F6E",bodyStyle:{padding:d?"8px":"24px"},children:[(0,e.jsxs)(j.Z,te()(te()({form:F,onFinish:qr,layout:"vertical"},xr),{},{initialValues:{lteEnable:0,lteLockType:0,lteMobility:0,nrEnable:0,nrLockType:0,nrMobility:0,nrScsType:0},children:[(0,e.jsxs)(Le.Z,{activeKey:$r,onChange:function(a){return ar(typeof a=="string"?[a]:a)},children:[(0,e.jsxs)(Ne,{header:(0,e.jsx)("span",{style:{fontSize:d?"14px":"16px"},children:"4G\u9501\u9891\u8BBE\u7F6E"}),children:[(0,e.jsx)(j.Z.Item,{label:"\u9501\u9891\u7C7B\u578B",name:"lteLockType",children:(0,e.jsx)(O.ZP.Group,{children:tr.map(function(u){return(0,e.jsx)(O.ZP,{value:u.value,children:u.label},u.value)})})}),(0,e.jsx)(j.Z.Item,{noStyle:!0,shouldUpdate:function(a,r){return a.lteLockType!==r.lteLockType},children:function(a){var r=a.getFieldValue,s=r("lteLockType");return s!==0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.Z.Item,{label:"\u79FB\u52A8\u6027\u8BBE\u7F6E",name:"nrMobility",tooltip:"\u63A7\u5236\u662F\u5426\u5141\u8BB8\u5C0F\u533A\u91CD\u9009\u548C\u5207\u6362",children:(0,e.jsxs)(O.ZP.Group,{children:[(0,e.jsx)(O.ZP,{value:0,children:"\u7981\u6B62\u91CD\u9009\u548C\u5207\u6362"}),(0,e.jsx)(O.ZP,{value:1,children:"\u5141\u8BB8\u91CD\u9009\u548C\u5207\u6362"})]})}),ne.map(function(n){return(0,e.jsx)("div",{style:{position:"relative"},children:(0,e.jsxs)("div",{style:ve(d),children:[(0,e.jsx)(j.Z.Item,{label:"\u9891\u6BB5(Band) ".concat(n+1),name:"lteBand_".concat(n),tooltip:"\u8BBE\u7F6E\u8981\u9501\u5B9A\u7684LTE\u9891\u6BB5",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9891\u6BB5"}],style:Y(d),children:(0,e.jsx)(be.Z,{options:Qr,placeholder:"\u8BF7\u9009\u62E9\u9891\u6BB5"})}),(s===1||s===2)&&(0,e.jsx)(j.Z.Item,{label:"\u9891\u70B9(ARFCN) ".concat(n+1),name:"lteArfcn_".concat(n),tooltip:"\u8BBE\u7F6E\u8981\u9501\u5B9A\u7684\u9891\u70B9",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9891\u70B9"}],style:Y(d),children:(0,e.jsx)(ee.Z,{placeholder:"\u8BF7\u8F93\u5165\u9891\u70B9\u503C"})}),s===2&&(0,e.jsx)(j.Z.Item,{label:"\u5C0F\u533AID(PCI) ".concat(n+1),name:"ltePci_".concat(n),tooltip:"\u8BBE\u7F6E\u8981\u9501\u5B9A\u7684\u5C0F\u533AID",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5C0F\u533AID"}],style:Y(d),children:(0,e.jsx)(ee.Z,{placeholder:"\u8BF7\u8F93\u5165\u5C0F\u533AID (0-503)"})}),n>0&&ne.length>1&&(0,e.jsx)(M.ZP,{type:"link",danger:!0,onClick:function(){return Xr(n)},style:{marginTop:"28px"},children:"\u5220\u9664"})]})},n)}),ne.length<20&&(0,e.jsx)(M.ZP,{type:"dashed",onClick:Jr,block:!0,style:{marginTop:"16px"},children:"\u6DFB\u52A0LTE\u9501\u9891\u9879"})]}):null}})]},"lteLock"),(0,e.jsxs)(Ne,{header:(0,e.jsx)("span",{style:{fontSize:d?"14px":"16px"},children:"5G\u9501\u9891\u8BBE\u7F6E"}),children:[(0,e.jsx)(j.Z.Item,{label:"\u9501\u9891\u7C7B\u578B",name:"nrLockType",children:(0,e.jsx)(O.ZP.Group,{children:tr.map(function(u){return(0,e.jsx)(O.ZP,{value:u.value,children:u.label},u.value)})})}),(0,e.jsx)(j.Z.Item,{noStyle:!0,shouldUpdate:function(a,r){return a.nrLockType!==r.nrLockType||Object.keys(a).some(function(s){return s.startsWith("nrBand_")})!==Object.keys(r).some(function(s){return s.startsWith("nrBand_")})},children:function(a){var r=a.getFieldValue,s=r("nrLockType");return s!==0&&s!==3?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.Z.Item,{label:"\u79FB\u52A8\u6027\u8BBE\u7F6E",name:"nrMobility",tooltip:"\u63A7\u5236\u662F\u5426\u5141\u8BB8\u5C0F\u533A\u91CD\u9009\u548C\u5207\u6362",children:(0,e.jsxs)(O.ZP.Group,{children:[(0,e.jsx)(O.ZP,{value:0,children:"\u7981\u6B62\u91CD\u9009\u548C\u5207\u6362"}),(0,e.jsx)(O.ZP,{value:1,children:"\u5141\u8BB8\u91CD\u9009\u548C\u5207\u6362"})]})}),W.map(function(n){return(0,e.jsx)("div",{style:{position:"relative"},children:(0,e.jsxs)("div",{style:ve(d),children:[(0,e.jsx)(j.Z.Item,{label:"\u9891\u6BB5(Band) ".concat(n+1),name:"nrBand_".concat(n),tooltip:"\u8BBE\u7F6E\u8981\u9501\u5B9A\u7684NR\u9891\u6BB5",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9891\u6BB5"},{validator:function(){var o=K()(B()().mark(function c(p,E){var m;return B()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(E){f.next=2;break}return f.abrupt("return",Promise.resolve());case 2:return m=le(E),F.setFieldsValue(S()({},"nrScsType_".concat(n),m)),f.abrupt("return",Promise.resolve());case 5:case"end":return f.stop()}},c)}));function t(c,p){return o.apply(this,arguments)}return t}()}],style:Y(d),children:(0,e.jsx)(be.Z,{options:ir,placeholder:"\u8BF7\u9009\u62E9\u9891\u6BB5",onChange:function(t){var c=le(t);F.setFieldsValue(S()({},"nrScsType_".concat(n),c))}})}),(s===1||s===2)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.Z.Item,{label:"\u9891\u70B9(ARFCN) ".concat(n+1),name:"nrArfcn_".concat(n),tooltip:"\u8BBE\u7F6E\u8981\u9501\u5B9A\u7684\u9891\u70B9",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9891\u70B9"}],style:Y(d),children:(0,e.jsx)(ee.Z,{placeholder:"\u8BF7\u8F93\u5165\u9891\u70B9\u503C"})}),(0,e.jsx)(j.Z.Item,{label:"\u5B50\u8F7D\u6CE2\u95F4\u9694(SCS) ".concat(n+1),name:"nrScsType_".concat(n),hidden:!0,children:(0,e.jsx)(ee.Z,{})})]}),s===2&&(0,e.jsx)(j.Z.Item,{label:"\u5C0F\u533AID(PCI) ".concat(n+1),name:"nrPci_".concat(n),tooltip:"\u8BBE\u7F6E\u8981\u9501\u5B9A\u7684\u5C0F\u533AID",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5C0F\u533AID"}],style:Y(d),children:(0,e.jsx)(ee.Z,{placeholder:"\u8BF7\u8F93\u5165\u5C0F\u533AID (0-1007)"})}),n>0&&(0,e.jsx)(M.ZP,{type:"link",danger:!0,onClick:function(){return dr(n)},style:{marginTop:"28px"},children:"\u5220\u9664"})]})},n)}),W.length<20&&(0,e.jsx)(M.ZP,{type:"dashed",onClick:cr,block:!0,style:{marginTop:"16px"},children:"\u6DFB\u52A0NR\u9501\u9891\u9879"})]}):s===3?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.Z.Item,{label:"\u79FB\u52A8\u6027\u8BBE\u7F6E",name:"nrMobility",tooltip:"\u63A7\u5236\u662F\u5426\u5141\u8BB8\u5C0F\u533A\u91CD\u9009\u548C\u5207\u6362",children:(0,e.jsxs)(O.ZP.Group,{children:[(0,e.jsx)(O.ZP,{value:0,children:"\u7981\u6B62\u91CD\u9009\u548C\u5207\u6362"}),(0,e.jsx)(O.ZP,{value:1,children:"\u5141\u8BB8\u91CD\u9009\u548C\u5207\u6362"})]})}),W.map(function(n){return(0,e.jsx)("div",{style:{position:"relative"},children:(0,e.jsxs)("div",{style:ve(d),children:[(0,e.jsx)(j.Z.Item,{label:"\u9891\u6BB5(Band) ".concat(n+1),name:"nrBand_".concat(n),tooltip:"\u8BBE\u7F6E\u8981\u9501\u5B9A\u7684NR\u9891\u6BB5",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9891\u6BB5"},{validator:function(){var o=K()(B()().mark(function c(p,E){var m;return B()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(E){f.next=2;break}return f.abrupt("return",Promise.resolve());case 2:return m=le(E),console.log(m),console.log("\u5206\u914D\u7684scstype"),F.setFieldsValue(S()({},"nrScsType_".concat(n),m)),f.abrupt("return",Promise.resolve());case 7:case"end":return f.stop()}},c)}));function t(c,p){return o.apply(this,arguments)}return t}()}],style:Y(d),children:(0,e.jsx)(be.Z,{options:ir,placeholder:"\u8BF7\u9009\u62E9\u9891\u6BB5",onChange:function(t){var c=le(t);F.setFieldsValue(S()({},"nrScsType_".concat(n),c))}})}),(s===1||s===2)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.Z.Item,{label:"\u9891\u70B9(ARFCN) ".concat(n+1),name:"nrArfcn_".concat(n),tooltip:"\u8BBE\u7F6E\u8981\u9501\u5B9A\u7684\u9891\u70B9",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9891\u70B9"}],style:Y(d),children:(0,e.jsx)(ee.Z,{placeholder:"\u8BF7\u8F93\u5165\u9891\u70B9\u503C"})}),(0,e.jsx)(j.Z.Item,{label:"\u5B50\u8F7D\u6CE2\u95F4\u9694(SCS) ".concat(n+1),name:"nrScsType_".concat(n),hidden:!0,children:(0,e.jsx)(ee.Z,{})})]}),s===2&&(0,e.jsx)(j.Z.Item,{label:"\u5C0F\u533AID(PCI) ".concat(n+1),name:"nrPci_".concat(n),tooltip:"\u8BBE\u7F6E\u8981\u9501\u5B9A\u7684\u5C0F\u533AID",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5C0F\u533AID"}],style:Y(d),children:(0,e.jsx)(ee.Z,{placeholder:"\u8BF7\u8F93\u5165\u5C0F\u533AID (0-1007)"})}),n>0&&(0,e.jsx)(M.ZP,{type:"link",danger:!0,onClick:function(){return dr(n)},style:{marginTop:"28px"},children:"\u5220\u9664"})]})},n)}),W.length<20&&(0,e.jsx)(M.ZP,{type:"dashed",onClick:cr,block:!0,style:{marginTop:"16px"},children:"\u6DFB\u52A0NR\u9501\u9891\u9879"})]}):null}})]},"nrLock")]}),(0,e.jsx)(j.Z.Item,{style:{marginTop:24,marginBottom:24,textAlign:"right",borderTop:"1px solid #f0f0f0",paddingTop:16},children:(0,e.jsx)(M.ZP,{type:"primary",htmlType:"submit",loading:kr,disabled:z,children:"\u4FDD\u5B58\u8BBE\u7F6E"})})]})),(0,e.jsx)(ue.Z,{style:{marginTop:24},bodyStyle:{padding:d?"8px":"24px"},title:(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:d?"14px":"16px"},children:[(0,e.jsxs)(ye.Z,{children:[(0,e.jsx)("span",{children:"\u90BB\u533A\u626B\u63CF"}),(0,e.jsx)(_e.Z,{title:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:"\u5148\u5728\u4E0A\u65B9\u8BBE\u7F6E\u5E76\u9501\u5B9A\u76EE\u6807\u9891\u70B9\uFF0C\u518D\u8FDB\u884C\u90BB\u533A\u626B\u63CF\uFF0C\u53EF\u4EE5\u66F4\u5BB9\u6613\u627E\u5230\u9700\u8981\u7684\u5C0F\u533A"}),(0,e.jsxs)("div",{style:{marginTop:"8px"},children:[(0,e.jsx)("strong",{children:"4G\u5EFA\u8BAE\u503C\uFF1A"}),(0,e.jsxs)("ul",{style:{margin:"4px 0",paddingLeft:"16px"},children:[(0,e.jsxs)("li",{children:["\u4FE1\u53F7\u5F3A\u5EA6(RSRP) ",">"," -100dBm"]}),(0,e.jsxs)("li",{children:["\u4FE1\u53F7\u8D28\u91CF(RSRQ) ",">"," -15dB"]})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("strong",{children:"5G\u5EFA\u8BAE\u503C\uFF1A"}),(0,e.jsxs)("ul",{style:{margin:"4px 0",paddingLeft:"16px"},children:[(0,e.jsxs)("li",{children:["\u4FE1\u53F7\u5F3A\u5EA6(RSRP) ",">"," -110dBm"]}),(0,e.jsxs)("li",{children:["\u4FE1\u53F7\u8D28\u91CF(RSRQ) ",">"," -18dB"]}),(0,e.jsxs)("li",{children:["\u4FE1\u566A\u6BD4(SINR) ",">"," 0dB"]})]})]})]}),children:(0,e.jsx)(he.Z,{})})]}),(0,e.jsx)(ye.Z,{children:(0,e.jsx)(M.ZP,{type:"primary",size:d?"middle":"small",onClick:pr,loading:Rr,disabled:z,children:"\u626B\u63CF\u90BB\u533A"})})]}),children:Fe.length>0?(0,e.jsx)("div",{style:{display:"grid",gridTemplateColumns:d?"1fr":"repeat(auto-fill, minmax(200px, 1fr))",gap:d?"4px":"8px",maxHeight:d?"calc(100vh - 400px)":300,overflowY:"auto"},children:Fe.map(function(u,a){return(0,e.jsxs)(ue.Z,{size:d?"small":"default",style:{background:"#f5f5f5",borderRadius:d?"4px":"8px"},bodyStyle:{padding:d?"6px":"8px",fontSize:d?"12px":"14px"},children:[(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[(0,e.jsxs)("div",{style:{fontSize:"14px",fontWeight:"bold",color:u.type==="NR"?"#1890ff":"#52c41a"},children:[u.type==="NR"?"5G":"4G"," ",u.band?"".concat(u.type==="NR"?"n":"B").concat(u.band):"\u672A\u77E5"]}),(0,e.jsx)(M.ZP,{type:"link",size:"small",onClick:function(){return fr(u)},loading:ae["".concat(u.type,"_").concat(u.pci,"_").concat(u.arfcn)],disabled:ae["".concat(u.type,"_").concat(u.pci,"_").concat(u.arfcn)]||z,children:ae["".concat(u.type,"_").concat(u.pci,"_").concat(u.arfcn)]?"\u9501\u5B9A\u4E2D":"\u9501\u5B9A"})]}),(0,e.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"},children:["PCI: ",u.pci," | ",u.arfcn]}),(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"2px",fontSize:"12px"},children:[(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,e.jsx)("span",{style:{flex:"0 0 45px"},children:"RSRP:"}),(0,e.jsxs)("div",{style:{flex:1,padding:"1px 4px",borderRadius:"2px",background:X(Number(u.rsrp)).color,color:"#fff",textAlign:"center"},children:[u.rsrp,"dBm (",X(Number(u.rsrp)).text,")"]})]}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,e.jsx)("span",{style:{flex:"0 0 45px"},children:"RSRQ:"}),(0,e.jsxs)("div",{style:{flex:1,padding:"1px 4px",borderRadius:"2px",background:ke(Number(u.rsrq)).color,color:"#fff",textAlign:"center"},children:[u.rsrq,"dB (",ke(Number(u.rsrq)).text,")"]})]}),u.type==="NR"&&(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,e.jsx)("span",{style:{flex:"0 0 45px"},children:"SINR:"}),(0,e.jsxs)("div",{style:{flex:1,padding:"1px 4px",borderRadius:"2px",background:se(Number(u.sinr)).color,color:"#fff",textAlign:"center"},children:[u.sinr,"dB (",se(Number(u.sinr)).text,")"]})]})]})]},a)})}):(0,e.jsx)(Ie.Z,{description:(0,e.jsx)("span",{style:{fontSize:d?"12px":"14px"},children:"\u6682\u65E0\u90BB\u533A\u6570\u636E"})})}),(0,e.jsx)(ue.Z,{title:(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:d?"14px":"16px"},children:[(0,e.jsxs)(ye.Z,{children:[(0,e.jsx)("span",{children:"5G SSB\u4FE1\u606F"}),(0,e.jsx)(_e.Z,{title:"\u663E\u793A5G\u5C0F\u533A\u7684SSB\u6CE2\u675F\u4FE1\u606F",children:(0,e.jsx)(he.Z,{})})]}),(0,e.jsx)(M.ZP,{type:"primary",size:d?"middle":"small",onClick:gr,loading:zr,disabled:z,children:"\u5237\u65B0SSB\u4FE1\u606F"})]}),style:{marginTop:16},bodyStyle:{padding:d?"8px":"24px"},children:U?(0,e.jsxs)("div",{children:[(0,e.jsxs)(ue.Z,{size:d?"small":"default",style:{background:"#f5f5f5",borderRadius:d?"4px":"8px",marginBottom:16},bodyStyle:{padding:d?"6px":"8px",fontSize:d?"12px":"14px"},children:[(0,e.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:(0,e.jsxs)("div",{style:{fontSize:"14px",fontWeight:"bold",color:"#1890ff"},children:["\u670D\u52A1\u5C0F\u533A | PCI: ",U.servingCell.pci]})}),(0,e.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"},children:["ARFCN: ",U.servingCell.arfcn]}),(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"2px",fontSize:"12px",marginBottom:"8px"},children:[(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,e.jsx)("span",{style:{flex:"0 0 45px"},children:"RSRP:"}),(0,e.jsxs)("div",{style:{flex:1,padding:"1px 4px",borderRadius:"2px",background:X(U.servingCell.rsrp).color,color:"#fff",textAlign:"center"},children:[U.servingCell.rsrp,"dBm (",X(U.servingCell.rsrp).text,")"]})]}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,e.jsx)("span",{style:{flex:"0 0 45px"},children:"SINR:"}),(0,e.jsxs)("div",{style:{flex:1,padding:"1px 4px",borderRadius:"2px",background:se(U.servingCell.sinr).color,color:"#fff",textAlign:"center"},children:[U.servingCell.sinr,"dB (",se(U.servingCell.sinr).text,")"]})]})]}),(0,e.jsx)(we.Z,{orientation:"left",plain:!0,style:{margin:"8px 0"},children:"\u6CE2\u675F\u4FE1\u606F"}),(0,e.jsx)("div",{style:{display:"grid",gridTemplateColumns:d?"1fr 1fr":"repeat(auto-fill, minmax(120px, 1fr))",gap:"8px"},children:U.servingCell.ssbs.map(function(u,a){return(0,e.jsxs)("div",{style:{background:"#fff",padding:"8px",borderRadius:"4px",textAlign:"center"},children:[(0,e.jsxs)("div",{style:{marginBottom:4},children:["SSB-",u.ssbId]}),(0,e.jsxs)("div",{style:{color:X(u.rsrp).color,fontWeight:"bold"},children:[u.rsrp,"dBm"]})]},a)})})]}),U.neighborCells.length>0&&(0,e.jsx)("div",{style:{display:"grid",gridTemplateColumns:d?"1fr":"repeat(auto-fill, minmax(200px, 1fr))",gap:d?"4px":"8px"},children:U.neighborCells.map(function(u,a){return(0,e.jsxs)(ue.Z,{size:d?"small":"default",style:{background:"#f5f5f5",borderRadius:d?"4px":"8px"},bodyStyle:{padding:d?"6px":"8px",fontSize:d?"12px":"14px"},children:[(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[(0,e.jsxs)("div",{style:{fontSize:"14px",fontWeight:"bold",color:"#1890ff"},children:["\u90BB\u533A | PCI: ",u.pci]}),(0,e.jsx)(M.ZP,{type:"link",size:"small",onClick:function(){return fr({type:"NR",pci:u.pci,arfcn:u.arfcn,band:Se("NR",parseInt(u.arfcn))},!0)},loading:ae["NR_".concat(u.pci,"_").concat(u.arfcn)],disabled:ae["NR_".concat(u.pci,"_").concat(u.arfcn)]||z,children:ae["NR_".concat(u.pci,"_").concat(u.arfcn)]?"\u9501\u5B9A\u4E2D":"\u9501\u5B9A"})]}),(0,e.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"},children:[(0,e.jsx)(_e.Z,{title:"SSB(\u540C\u6B65\u4FE1\u53F7\u5757)\u662F5G NR\u7CFB\u7EDF\u4E2D\u7684\u91CD\u8981\u4FE1\u53F7,\u5305\u542B\u4E86\u540C\u6B65\u548C\u5E7F\u64AD\u4FE1\u606F,\u7528\u4E8E\u5C0F\u533A\u641C\u7D22\u548C\u521D\u59CB\u63A5\u5165\u3002\u591A\u4E2ASSB\u6CE2\u675F\u53EF\u4EE5\u63D0\u4F9B\u66F4\u597D\u7684\u8986\u76D6\u8303\u56F4\u548C\u4FE1\u53F7\u8D28\u91CF\u3002",children:(0,e.jsx)(he.Z,{style:{marginRight:4}})}),"ARFCN: ",u.arfcn]}),(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"2px",fontSize:"12px",marginBottom:"8px"},children:[(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,e.jsx)("span",{style:{flex:"0 0 45px"},children:"RSRP:"}),(0,e.jsxs)("div",{style:{flex:1,padding:"1px 4px",borderRadius:"2px",background:X(u.rsrp).color,color:"#fff",textAlign:"center"},children:[u.rsrp,"dBm (",X(u.rsrp).text,")"]})]}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,e.jsx)("span",{style:{flex:"0 0 45px"},children:"SINR:"}),(0,e.jsxs)("div",{style:{flex:1,padding:"1px 4px",borderRadius:"2px",background:se(u.sinr).color,color:"#fff",textAlign:"center"},children:[u.sinr,"dB (",se(u.sinr).text,")"]})]})]}),u.ssbs.length>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(we.Z,{orientation:"left",plain:!0,style:{margin:"8px 0"},children:"\u6CE2\u675F\u4FE1\u606F"}),(0,e.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"4px"},children:u.ssbs.map(function(r,s){return(0,e.jsxs)("div",{style:{background:"#fff",padding:"4px",borderRadius:"4px",textAlign:"center"},children:[(0,e.jsxs)("div",{style:{marginBottom:2},children:["SSB-",r.ssbId]}),(0,e.jsxs)("div",{style:{color:X(r.rsrp).color,fontWeight:"bold"},children:[r.rsrp,"dBm"]})]},s)})})]})]},a)})})]}):(0,e.jsx)(Ie.Z,{description:(0,e.jsx)("span",{style:{fontSize:d?"12px":"14px"},children:"\u6682\u65E0SSB\u4FE1\u606F"})})})]}),(0,e.jsx)(ue.Z,{title:(0,e.jsx)("span",{style:{fontSize:d?"14px":"16px"},children:"5G\u63A5\u5165\u6A21\u5F0F\u8BBE\u7F6E"}),bodyStyle:{padding:d?"8px":"24px"},style:{marginTop:16},children:(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:"8px"},children:[(0,e.jsx)(M.ZP,{onClick:function(){return Te({nr_sa_support_flag:1,nr_dc_mode:0,gc_access_mode:1})},loading:xe,disabled:z,type:(D==null?void 0:D.nr_sa_support_flag)===1&&(D==null?void 0:D.nr_dc_mode)===0?"primary":"default",style:{flex:1,height:d?"36px":"32px",fontSize:d?"13px":"14px",padding:"4px 8px",display:"flex",alignItems:"center",justifyContent:"center"},children:"\u4EC5SA"}),(0,e.jsx)(M.ZP,{onClick:function(){return Te({nr_sa_support_flag:0,nr_dc_mode:1,gc_access_mode:0})},loading:xe,disabled:z,type:(D==null?void 0:D.nr_sa_support_flag)===0&&(D==null?void 0:D.nr_dc_mode)===1?"primary":"default",style:{flex:1,height:d?"36px":"32px",fontSize:d?"13px":"14px",padding:"4px 8px",display:"flex",alignItems:"center",justifyContent:"center"},children:"\u4EC5NSA"}),(0,e.jsx)(M.ZP,{onClick:function(){return Te({nr_sa_support_flag:1,nr_dc_mode:1,gc_access_mode:1})},loading:xe,disabled:z,type:(D==null?void 0:D.nr_sa_support_flag)===1&&(D==null?void 0:D.nr_dc_mode)===1?"primary":"default",style:{flex:1,height:d?"36px":"32px",fontSize:d?"13px":"14px",padding:"4px 8px",display:"flex",alignItems:"center",justifyContent:"center"},children:"SA+NSA"})]})})]})})};Pe.default=Sr}}]);
